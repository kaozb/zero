
<!DOCTYPE html>

<html lang="zh_Hans">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>表单资源（ Media 类） &#8212; Django 4.2.6.dev20230904111759 文档</title>
    <link rel="stylesheet" type="text/css" href="../../static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../static/default.css" />
    <script data-url_root="../../" id="documentation_options" src="../../static/documentation_options.js"></script>
    <script src="../../static/jquery.js"></script>
    <script src="../../static/underscore.js"></script>
    <script src="../../static/doctools.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="模板" href="../templates.html" />
    <link rel="prev" title="从模型创建表单" href="modelforms.html" />



 
<script src="../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../index.html">Django 4.2.6.dev20230904111759 文档</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">Home</a>  |
        <a title="Table of contents" href="../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../genindex.html">Index</a>  |
        <a title="Module index" href="../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="modelforms.html" title="从模型创建表单">previous</a>
     |
    <a href="../index.html" title="使用 Django" accesskey="U">up</a>
   |
    <a href="../templates.html" title="模板">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="topics-forms-media">
            
  <div class="section" id="s-form-assets-the-media-class">
<span id="form-assets-the-media-class"></span><h1>表单资源（ <code class="docutils literal notranslate"><span class="pre">Media</span></code> 类）<a class="headerlink" href="#form-assets-the-media-class" title="永久链接至标题">¶</a></h1>
<p>呈现一个有吸引力的、易于使用的网络表格需要的不仅仅是 HTML，它还需要 CSS 样式表，如果你想使用花哨的部件，你可能还需要在每个页面上包含一些 JavaScript。任何特定页面所需的 CSS 和 JavaScript 的确切组合将取决于该页面上使用的部件。</p>
<p>这就是资源定义的作用。Django 允许你将不同的文件——如样式表和脚本——与需要这些资产的表单和部件联系起来。例如，如果你想用一个日历来渲染 DateFields，你可以定义一个自定义的日历部件。然后这个部件可以与渲染日历所需的 CSS 和 JavaScript 相关联。当日历部件在表单上使用时，Django 能够识别需要的 CSS 和 JavaScript 文件，并以适合包含在你的网页上的形式提供文件名列表。</p>
<div class="admonition-assets-and-django-admin admonition">
<p class="first admonition-title">资源及Django Admin</p>
<p>Django Admin应用程序为日历、选择过滤及其他功能定义了一些定制的组件。这些组件定义资源的需求，Django Admin使用自定义组件来代替Django的默认组件。Admin模板将只会包含在页面上呈现组件所需的文件。</p>
<p class="last">如果您喜欢Django Admin应用程序使用的组件，您可以在应用中随意使用它们。它们都位于 <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.widgets</span></code> 。</p>
</div>
<div class="admonition-which-javascript-toolkit admonition">
<p class="first admonition-title">哪个JavaScript工具包？</p>
<p class="last">现在有很多JavaScript工具包，它们中许多都包含组件（比如日历组件），可以用来改善您的应用程序。Django刻意避免去推荐任何一个JavaScript工具包。每个工具包都有自己的优点和缺点，使用适合您需求的工具包。Django能够与任何JavaScript工具包集成。</p>
</div>
<div class="section" id="s-assets-as-a-static-definition">
<span id="s-id1"></span><span id="assets-as-a-static-definition"></span><span id="id1"></span><h2>资源作为静态定义<a class="headerlink" href="#assets-as-a-static-definition" title="永久链接至标题">¶</a></h2>
<p>定义资源最简单方法是静态定义。要使用这种方法，声明是一个内部的 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 类。此内部类的属性定义了这个需求。</p>
<p>这有个例子:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>


<span class="k">class</span> <span class="nc">CalendarWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;pretty.css&quot;</span><span class="p">],</span>
        <span class="p">}</span>
        <span class="n">js</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;animations.js&quot;</span><span class="p">,</span> <span class="s2">&quot;actions.js&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>这段代码定义了一个 <code class="docutils literal notranslate"><span class="pre">CalendarWidget</span></code> ，它继承自 <code class="docutils literal notranslate"><span class="pre">TextInput</span></code> 。每次CalendarWidget在表单上使用时，该表单都会包含CSS文件 <code class="docutils literal notranslate"><span class="pre">pretty.css</span></code> ，以及JavaScript文件 <code class="docutils literal notranslate"><span class="pre">animations.js</span></code> 和 <code class="docutils literal notranslate"><span class="pre">actions.js</span></code> 。</p>
<p>This static definition is converted at runtime into a widget property
named <code class="docutils literal notranslate"><span class="pre">media</span></code>. The list of assets for a <code class="docutils literal notranslate"><span class="pre">CalendarWidget</span></code> instance
can be retrieved through this property:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href=&quot;http://static.example.com/pretty.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/animations.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/actions.js&quot;&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>以下是所有可能的 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 选项列表。没有一个是必需项。</p>
<div class="section" id="s-css">
<span id="css"></span><h3><code class="docutils literal notranslate"><span class="pre">css</span></code><a class="headerlink" href="#css" title="永久链接至标题">¶</a></h3>
<p>描述各种表单输出媒体所需的CSS文件的字典。</p>
<p>字典中的值应该是一个文件名元组/列表。有关如何指定这些文件的路径的详细内容，请参阅 <a class="reference internal" href="#form-asset-paths"><span class="std std-ref">路径章节</span></a> 。</p>
<p>字典中的键是输出媒体类型。它们和媒体声明中CSS文件接受的类型相同：'all'、'aural'、'braille'、'embossed'、'handheld'、'print'、'projection'、'screen'、'tty' 和 'tv'。如果您需要针对不同媒体类型使用不同的样式表，就要给每个输出媒体提供一个CSS文件列表。下面的示例提供了两个CSS选项——一个用于屏幕，一个用于打印：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
    <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;screen&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;pretty.css&quot;</span><span class="p">],</span>
        <span class="s2">&quot;print&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;newspaper.css&quot;</span><span class="p">],</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>如果一组CSS文件适用于多种输出媒体类型，字典的键可以是以逗号分隔的输出媒体类型列表。在下面的例子中，电视和投影机将具有相同的媒体需求：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
    <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;screen&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;pretty.css&quot;</span><span class="p">],</span>
        <span class="s2">&quot;tv,projector&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;lo_res.css&quot;</span><span class="p">],</span>
        <span class="s2">&quot;print&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;newspaper.css&quot;</span><span class="p">],</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>If this last CSS definition were to be rendered, it would become the following HTML:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://static.example.com/pretty.css&quot;</span> <span class="na">media</span><span class="o">=</span><span class="s">&quot;screen&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://static.example.com/lo_res.css&quot;</span> <span class="na">media</span><span class="o">=</span><span class="s">&quot;tv,projector&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://static.example.com/newspaper.css&quot;</span> <span class="na">media</span><span class="o">=</span><span class="s">&quot;print&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="versionchanged">
<span class="title">Changed in Django 4.1:</span> <p>In older versions, the <code class="docutils literal notranslate"><span class="pre">type=&quot;text/css&quot;</span></code> attribute is included in CSS
links.</p>
</div>
</div>
<div class="section" id="s-js">
<span id="js"></span><h3><code class="docutils literal notranslate"><span class="pre">js</span></code><a class="headerlink" href="#js" title="永久链接至标题">¶</a></h3>
<p>描述所需JavaScript文件的一个元组。有关如何指定这些文件的路径的详细内容，请参阅 <a class="reference internal" href="#form-asset-paths"><span class="std std-ref">路径章节</span></a> 。</p>
</div>
<div class="section" id="s-extend">
<span id="extend"></span><h3><code class="docutils literal notranslate"><span class="pre">extend</span></code><a class="headerlink" href="#extend" title="永久链接至标题">¶</a></h3>
<p>定义了 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 声明继承行为的一个布尔值。</p>
<p>By default, any object using a static <code class="docutils literal notranslate"><span class="pre">Media</span></code> definition will
inherit all the assets associated with the parent widget. This occurs
regardless of how the parent defines its own requirements. For
example, if we were to extend our basic Calendar widget from the
example above:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">FancyCalendarWidget</span><span class="p">(</span><span class="n">CalendarWidget</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;fancy.css&quot;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;whizbang.js&quot;</span><span class="p">]</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">FancyCalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href=&quot;http://static.example.com/pretty.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;link href=&quot;http://static.example.com/fancy.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/animations.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/actions.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/whizbang.js&quot;&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>The FancyCalendar widget inherits all the assets from its parent
widget. If you don't want <code class="docutils literal notranslate"><span class="pre">Media</span></code> to be inherited in this way, add
an <code class="docutils literal notranslate"><span class="pre">extend=False</span></code> declaration to the <code class="docutils literal notranslate"><span class="pre">Media</span></code> declaration:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">FancyCalendarWidget</span><span class="p">(</span><span class="n">CalendarWidget</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">extend</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">... </span>        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;fancy.css&quot;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;whizbang.js&quot;</span><span class="p">]</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">FancyCalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href=&quot;http://static.example.com/fancy.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/whizbang.js&quot;&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>如果您需要更多的继承控制，用一个 <a class="reference internal" href="#dynamic-property"><span class="std std-ref">动态属性</span></a> 定义你的 。动态属性使您可以完全控制哪些文件是否继承。</p>
</div>
</div>
<div class="section" id="s-media-as-a-dynamic-property">
<span id="s-dynamic-property"></span><span id="media-as-a-dynamic-property"></span><span id="dynamic-property"></span><h2>把 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 作为动态属性<a class="headerlink" href="#media-as-a-dynamic-property" title="永久链接至标题">¶</a></h2>
<p>如果您需要执行一些更复杂的资源需求操作，你可以直接定义 <code class="docutils literal notranslate"><span class="pre">media</span></code> 属性。这是通过定义一个返回 <code class="docutils literal notranslate"><span class="pre">forms.Media</span></code> 实例的组件属性来实现的。这个 <code class="docutils literal notranslate"><span class="pre">forms.Media</span></code> 的构造函数接受 <code class="docutils literal notranslate"><span class="pre">css</span></code> 和 <code class="docutils literal notranslate"><span class="pre">js</span></code> 关键字参数，与静态媒体定义中使用的格式相同。</p>
<p>例如，我们也可以以动态的方式定义日历组件的静态定义：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CalendarWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">media</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">forms</span><span class="o">.</span><span class="n">Media</span><span class="p">(</span>
            <span class="n">css</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;pretty.css&quot;</span><span class="p">]},</span> <span class="n">js</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;animations.js&quot;</span><span class="p">,</span> <span class="s2">&quot;actions.js&quot;</span><span class="p">]</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>更多有关如何为动态 <code class="docutils literal notranslate"><span class="pre">media</span></code> 属性构建返回值的内容，请参阅 媒体对象 章节。</p>
</div>
<div class="section" id="s-paths-in-asset-definitions">
<span id="s-form-asset-paths"></span><span id="paths-in-asset-definitions"></span><span id="form-asset-paths"></span><h2>资源定义中的路径<a class="headerlink" href="#paths-in-asset-definitions" title="永久链接至标题">¶</a></h2>
<div class="section" id="s-paths-as-strings">
<span id="paths-as-strings"></span><h3>Paths as strings<a class="headerlink" href="#paths-as-strings" title="永久链接至标题">¶</a></h3>
<p>String paths used to specify assets can be either relative or absolute. If a
path starts with <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">http://</span></code> or <code class="docutils literal notranslate"><span class="pre">https://</span></code>, it will be
interpreted as an absolute path, and left as-is. All other paths will
be prepended with the value of the appropriate prefix. If the
<a class="reference internal" href="../../ref/contrib/staticfiles.html#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a> app is installed, it will be used to serve
assets.</p>
<p>无论您是否使用 <a class="reference internal" href="../../ref/contrib/staticfiles.html#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a> ，都需要设置 <a class="reference internal" href="../../ref/settings.html#std-setting-STATIC_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATIC_URL</span></code></a> 和 <a class="reference internal" href="../../ref/settings.html#std-setting-STATIC_ROOT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATIC_ROOT</span></code></a> 来渲染一张完整的网页。</p>
<p>To find the appropriate prefix to use, Django will check if the
<a class="reference internal" href="../../ref/settings.html#std-setting-STATIC_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATIC_URL</span></code></a> setting is not <code class="docutils literal notranslate"><span class="pre">None</span></code> and automatically fall back
to using <a class="reference internal" href="../../ref/settings.html#std-setting-MEDIA_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_URL</span></code></a>. For example, if the <a class="reference internal" href="../../ref/settings.html#std-setting-MEDIA_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_URL</span></code></a> for
your site was <code class="docutils literal notranslate"><span class="pre">'http://uploads.example.com/'</span></code> and <a class="reference internal" href="../../ref/settings.html#std-setting-STATIC_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATIC_URL</span></code></a>
was <code class="docutils literal notranslate"><span class="pre">None</span></code>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CalendarWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/css/pretty.css&quot;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;animations.js&quot;</span><span class="p">,</span> <span class="s2">&quot;http://othersite.com/actions.js&quot;</span><span class="p">]</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href=&quot;/css/pretty.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;script src=&quot;http://uploads.example.com/animations.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://othersite.com/actions.js&quot;&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>But if <a class="reference internal" href="../../ref/settings.html#std-setting-STATIC_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATIC_URL</span></code></a> is <code class="docutils literal notranslate"><span class="pre">'http://static.example.com/'</span></code>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href=&quot;/css/pretty.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/animations.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://othersite.com/actions.js&quot;&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>Or if <a class="reference internal" href="../../ref/contrib/staticfiles.html#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">staticfiles</span></code></a> is configured using the
<a class="reference internal" href="../../ref/contrib/staticfiles.html#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage</span></code></a>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href=&quot;/css/pretty.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;script src=&quot;https://static.example.com/animations.27e20196a850.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://othersite.com/actions.js&quot;&gt;&lt;/script&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="s-paths-as-objects">
<span id="paths-as-objects"></span><h3>Paths as objects<a class="headerlink" href="#paths-as-objects" title="永久链接至标题">¶</a></h3>
<div class="versionadded">
<span class="title">New in Django 4.1.</span> </div>
<p>Asset paths may also be given as hashable objects implementing an
<code class="docutils literal notranslate"><span class="pre">__html__()</span></code> method. The <code class="docutils literal notranslate"><span class="pre">__html__()</span></code> method is typically added using the
<a class="reference internal" href="../../ref/utils.html#django.utils.html.html_safe" title="django.utils.html.html_safe"><code class="xref py py-func docutils literal notranslate"><span class="pre">html_safe()</span></code></a> decorator. The object is responsible for
outputting the complete HTML <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;link&gt;</span></code> tag content:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.utils.html</span> <span class="kn">import</span> <span class="n">html_safe</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@html_safe</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">JSPath</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s1">&#39;&lt;script src=&quot;https://example.org/asset.js&quot; rel=&quot;stylesheet&quot;&gt;&#39;</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">SomeWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">[</span><span class="n">JSPath</span><span class="p">()]</span>
<span class="gp">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s-media-objects">
<span id="media-objects"></span><h2><code class="docutils literal notranslate"><span class="pre">Media</span></code> 对象<a class="headerlink" href="#media-objects" title="永久链接至标题">¶</a></h2>
<p>当您访问表单或者组件的 <code class="docutils literal notranslate"><span class="pre">media</span></code>&nbsp;属性时，返回值是一个 <code class="docutils literal notranslate"><span class="pre">forms.Media</span></code> 对象。正如我们已经看到的， <code class="docutils literal notranslate"><span class="pre">Media</span></code> 对象的字符串表示是一段需要在您HTML页面的 <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code> 块中包含相关文件的HTML代码。</p>
<p>然而， <code class="docutils literal notranslate"><span class="pre">Media</span></code> 对象还有其他一些有趣的属性。</p>
<div class="section" id="s-subsets-of-assets">
<span id="subsets-of-assets"></span><h3>资源的子集<a class="headerlink" href="#subsets-of-assets" title="永久链接至标题">¶</a></h3>
<p>If you only want files of a particular type, you can use the subscript
operator to filter out a medium of interest. For example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href=&quot;http://static.example.com/pretty.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/animations.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/actions.js&quot;&gt;&lt;/script&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">[</span><span class="s2">&quot;css&quot;</span><span class="p">])</span>
<span class="go">&lt;link href=&quot;http://static.example.com/pretty.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
</pre></div>
</div>
<p>当您使用下标运算符时，返回值是一个新的 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 对象——但只包含感兴趣的媒体。</p>
</div>
<div class="section" id="s-combining-media-objects">
<span id="combining-media-objects"></span><h3>合并 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 对象<a class="headerlink" href="#combining-media-objects" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Media</span></code> objects can also be added together. When two <code class="docutils literal notranslate"><span class="pre">Media</span></code> objects are
added, the resulting <code class="docutils literal notranslate"><span class="pre">Media</span></code> object contains the union of the assets
specified by both:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CalendarWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;pretty.css&quot;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;animations.js&quot;</span><span class="p">,</span> <span class="s2">&quot;actions.js&quot;</span><span class="p">]</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">OtherWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;whizbang.js&quot;</span><span class="p">]</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w1</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w2</span> <span class="o">=</span> <span class="n">OtherWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">w1</span><span class="o">.</span><span class="n">media</span> <span class="o">+</span> <span class="n">w2</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href=&quot;http://static.example.com/pretty.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/animations.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/actions.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/whizbang.js&quot;&gt;&lt;/script&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="s-order-of-assets">
<span id="s-form-media-asset-order"></span><span id="order-of-assets"></span><span id="form-media-asset-order"></span><h3>资源的排序<a class="headerlink" href="#order-of-assets" title="永久链接至标题">¶</a></h3>
<p>资源插入DOM的顺序一般来说很重要。例如，您可能有一个依赖于jQuery的脚本。因此，合并 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 对象会尝试保持资源在每个 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 类中定义的相对顺序。</p>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CalendarWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;jQuery.js&quot;</span><span class="p">,</span> <span class="s2">&quot;calendar.js&quot;</span><span class="p">,</span> <span class="s2">&quot;noConflict.js&quot;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">TimeWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;jQuery.js&quot;</span><span class="p">,</span> <span class="s2">&quot;time.js&quot;</span><span class="p">,</span> <span class="s2">&quot;noConflict.js&quot;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w1</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w2</span> <span class="o">=</span> <span class="n">TimeWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">w1</span><span class="o">.</span><span class="n">media</span> <span class="o">+</span> <span class="n">w2</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;script src=&quot;http://static.example.com/jQuery.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/calendar.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/time.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/noConflict.js&quot;&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>合并 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 对象时，如果资源排序冲突，会导致警告提示： <code class="docutils literal notranslate"><span class="pre">MediaOrderConflictWarning</span></code> 。</p>
</div>
</div>
<div class="section" id="s-media-on-forms">
<span id="media-on-forms"></span><h2>表单上的 <code class="docutils literal notranslate"><span class="pre">Media</span></code><a class="headerlink" href="#media-on-forms" title="永久链接至标题">¶</a></h2>
<p>组件不是唯一可以具有 <code class="docutils literal notranslate"><span class="pre">media</span></code> 定义的对象——表单也可以。表单上 <code class="docutils literal notranslate"><span class="pre">media</span></code> 定义的规则与组件的规则相同：声明可以是静态的或动态的；声明的路径和继承规则也一模一样。</p>
<p>Regardless of whether you define a <code class="docutils literal notranslate"><span class="pre">media</span></code> declaration, <em>all</em> Form
objects have a <code class="docutils literal notranslate"><span class="pre">media</span></code> property. The default value for this property
is the result of adding the <code class="docutils literal notranslate"><span class="pre">media</span></code> definitions for all widgets that
are part of the form:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ContactForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">date</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">CalendarWidget</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">OtherWidget</span><span class="p">)</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">media</span>
<span class="go">&lt;link href=&quot;http://static.example.com/pretty.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/animations.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/actions.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/whizbang.js&quot;&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>If you want to associate additional assets with a form -- for example,
CSS for form layout -- add a <code class="docutils literal notranslate"><span class="pre">Media</span></code> declaration to the form:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ContactForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">date</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">CalendarWidget</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">OtherWidget</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;layout.css&quot;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">media</span>
<span class="go">&lt;link href=&quot;http://static.example.com/pretty.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;link href=&quot;http://static.example.com/layout.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot;&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/animations.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/actions.js&quot;&gt;&lt;/script&gt;</span>
<span class="go">&lt;script src=&quot;http://static.example.com/whizbang.js&quot;&gt;&lt;/script&gt;</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../contents.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">表单资源（ <code class="docutils literal notranslate"><span class="pre">Media</span></code> 类）</a><ul>
<li><a class="reference internal" href="#assets-as-a-static-definition">资源作为静态定义</a><ul>
<li><a class="reference internal" href="#css"><code class="docutils literal notranslate"><span class="pre">css</span></code></a></li>
<li><a class="reference internal" href="#js"><code class="docutils literal notranslate"><span class="pre">js</span></code></a></li>
<li><a class="reference internal" href="#extend"><code class="docutils literal notranslate"><span class="pre">extend</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#media-as-a-dynamic-property">把 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 作为动态属性</a></li>
<li><a class="reference internal" href="#paths-in-asset-definitions">资源定义中的路径</a><ul>
<li><a class="reference internal" href="#paths-as-strings">Paths as strings</a></li>
<li><a class="reference internal" href="#paths-as-objects">Paths as objects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#media-objects"><code class="docutils literal notranslate"><span class="pre">Media</span></code> 对象</a><ul>
<li><a class="reference internal" href="#subsets-of-assets">资源的子集</a></li>
<li><a class="reference internal" href="#combining-media-objects">合并 <code class="docutils literal notranslate"><span class="pre">Media</span></code> 对象</a></li>
<li><a class="reference internal" href="#order-of-assets">资源的排序</a></li>
</ul>
</li>
<li><a class="reference internal" href="#media-on-forms">表单上的 <code class="docutils literal notranslate"><span class="pre">Media</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一个主题</h4>
    <p class="topless"><a href="modelforms.html"
                          title="上一章">从模型创建表单</a></p>
  </div>
  <div>
    <h4>下一个主题</h4>
    <p class="topless"><a href="../templates.html"
                          title="下一章">模板</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../../sources/topics/forms/media.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">9月 04, 2023</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="modelforms.html" title="从模型创建表单">previous</a>
     |
    <a href="../index.html" title="使用 Django" accesskey="U">up</a>
   |
    <a href="../templates.html" title="模板">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>