
<!DOCTYPE html>

<html lang="zh_Hans">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Django 4.2 版本发行说明 &#8212; Django 5.0.3.dev20240221071519 文档</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Django 4.1.13 版本发行说明" href="4.1.13.html" />
    <link rel="prev" title="Django 4.2.1 版本发行说明" href="4.2.1.html" />



 
<script src="../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Django 5.0.3.dev20240221071519 文档</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="4.2.1.html" title="Django 4.2.1 版本发行说明">previous</a>
     |
    <a href="index.html" title="发行说明" accesskey="U">up</a>
   |
    <a href="4.1.13.html" title="Django 4.1.13 版本发行说明">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="releases-4.2">
            
  <div class="section" id="s-django-4-2-release-notes">
<span id="django-4-2-release-notes"></span><h1>Django 4.2 版本发行说明<a class="headerlink" href="#django-4-2-release-notes" title="永久链接至标题">¶</a></h1>
<p><em>2023 年 4 月 3 日</em></p>
<p>欢迎使用 Django 4.2 ！</p>
<p>这些发布说明涵盖了 <a class="reference internal" href="#whats-new-4-2"><span class="std std-ref">新功能</span></a>，以及一些 <a class="reference internal" href="#backwards-incompatible-4-2"><span class="std std-ref">不向后兼容的更改</span></a>，在从 Django 4.1 或更早版本升级时需要注意。我们已经 <a class="reference internal" href="#deprecated-features-4-2"><span class="std std-ref">开始了一些功能的弃用过程</span></a>。</p>
<p>如果你要更新现有的项目，请看 <a class="reference internal" href="../howto/upgrade-version.html"><span class="doc">如何将 Django 更新至新的版本</span></a> 指南。</p>
<p>Django 4.2 被指定为 <a class="reference internal" href="../internals/release-process.html#term-Long-term-support-release"><span class="xref std std-term">长期支持版本</span></a>。它将在发布后至少三年内接收安全更新。对于之前的 LTS 版本 Django 3.2，支持将在 2024 年 4 月结束。</p>
<div class="section" id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Python 兼容性<a class="headerlink" href="#python-compatibility" title="永久链接至标题">¶</a></h2>
<p>Django 4.2 支持 Python 3.8、3.9、3.10、3.11 和 3.12（截止到 4.2.8 版本）。我们 <strong>强烈推荐</strong> 并且只官方支持每个系列的最新版本。</p>
</div>
<div class="section" id="s-what-s-new-in-django-4-2">
<span id="s-whats-new-4-2"></span><span id="what-s-new-in-django-4-2"></span><span id="whats-new-4-2"></span><h2>Django 4.2 新特性<a class="headerlink" href="#what-s-new-in-django-4-2" title="永久链接至标题">¶</a></h2>
<div class="section" id="s-psycopg-3-support">
<span id="psycopg-3-support"></span><h3>Psycopg 3 支持<a class="headerlink" href="#psycopg-3-support" title="永久链接至标题">¶</a></h3>
<p>Django 现在支持 <a class="reference external" href="https://www.psycopg.org/psycopg3/">psycopg</a> 版本 3.1.8 或更高版本。要更新您的代码，请安装 <a class="reference external" href="https://pypi.org/project/psycopg/">psycopg library</a>，您不需要更改 <a class="reference internal" href="../ref/settings.html#std-setting-DATABASE-ENGINE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ENGINE</span></code></a>，因为 <code class="docutils literal notranslate"><span class="pre">django.db.backends.postgresql</span></code> 支持这两个库。</p>
<p>对 <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> 的支持可能会在将来的某个时候被弃用并移除。</p>
<p>请注意，<code class="docutils literal notranslate"><span class="pre">psycopg</span></code> 3 对 <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> 进行了一些不兼容的更改。因此，您可能需要进行一些更改以适应与 <a class="reference external" href="https://www.psycopg.org/psycopg3/docs/basic/from_pg2.html">psycopg2 的不同之处</a>。</p>
</div>
<div class="section" id="s-comments-on-columns-and-tables">
<span id="comments-on-columns-and-tables"></span><h3>对列和表的注释<a class="headerlink" href="#comments-on-columns-and-tables" title="永久链接至标题">¶</a></h3>
<p>新的 <a class="reference internal" href="../ref/models/fields.html#django.db.models.Field.db_comment" title="django.db.models.Field.db_comment"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Field.db_comment</span></code></a> 和 <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.db_table_comment" title="django.db.models.Options.db_table_comment"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.db_table_comment</span></code></a> 选项允许分别在列和表上创建注释。例如：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span> <span class="nc">Question</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">db_comment</span><span class="o">=</span><span class="s2">&quot;Poll question&quot;</span><span class="p">)</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span>
        <span class="n">db_comment</span><span class="o">=</span><span class="s2">&quot;Date and time when the question was published&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table_comment</span> <span class="o">=</span> <span class="s2">&quot;Poll questions&quot;</span>


<span class="k">class</span> <span class="nc">Answer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">question</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Question</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">db_comment</span><span class="o">=</span><span class="s2">&quot;Reference to a question&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">db_comment</span><span class="o">=</span><span class="s2">&quot;Question answer&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table_comment</span> <span class="o">=</span> <span class="s2">&quot;Question answers&quot;</span>
</pre></div>
</div>
<p>此外，新的 <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.AlterModelTableComment" title="django.db.migrations.operations.AlterModelTableComment"><code class="xref py py-class docutils literal notranslate"><span class="pre">AlterModelTableComment</span></code></a> 操作允许更改在 <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.db_table_comment" title="django.db.models.Options.db_table_comment"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.db_table_comment</span></code></a> 中定义的表注释。</p>
</div>
<div class="section" id="s-mitigation-for-the-breach-attack">
<span id="mitigation-for-the-breach-attack"></span><h3>对 BREACH 攻击的缓解措施<a class="headerlink" href="#mitigation-for-the-breach-attack" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="../ref/middleware.html#django.middleware.gzip.GZipMiddleware" title="django.middleware.gzip.GZipMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">GZipMiddleware</span></code></a> 现在包括对 BREACH 攻击的缓解措施。它将在 gzip 响应中添加最多 100 个随机字节，以增加 BREACH 攻击的难度。在 <a class="reference external" href="https://ieeexplore.ieee.org/document/9754554">Heal The Breach (HTB) paper</a> 中详细了解有关缓解技术。</p>
</div>
<div class="section" id="s-in-memory-file-storage">
<span id="in-memory-file-storage"></span><h3>内存中的文件存储<a class="headerlink" href="#in-memory-file-storage" title="永久链接至标题">¶</a></h3>
<p>新的 <a class="reference internal" href="../ref/files/storage.html#django.core.files.storage.InMemoryStorage" title="django.core.files.storage.InMemoryStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.files.storage.InMemoryStorage</span></code></a> 类提供了非持久性存储，对于加速测试并避免磁盘访问非常有用。</p>
</div>
<div class="section" id="s-custom-file-storages">
<span id="custom-file-storages"></span><h3>自定义文件存储<a class="headerlink" href="#custom-file-storages" title="永久链接至标题">¶</a></h3>
<p>新的 <a class="reference internal" href="../ref/settings.html#std-setting-STORAGES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STORAGES</span></code></a> 设置允许配置多个自定义文件存储后端。它还控制了管理 <a class="reference internal" href="../topics/files.html"><span class="doc">文件</span></a> （<code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code> 键）和 <a class="reference internal" href="../ref/contrib/staticfiles.html"><span class="doc">静态文件</span></a> （<code class="docutils literal notranslate"><span class="pre">&quot;staticfiles&quot;</span></code> 键）的存储引擎。</p>
<p>在此版本中，旧的 <code class="docutils literal notranslate"><span class="pre">DEFAULT_FILE_STORAGE</span></code> 和 <code class="docutils literal notranslate"><span class="pre">STATICFILES_STORAGE</span></code> 设置已被弃用。</p>
</div>
<div class="section" id="s-minor-features">
<span id="minor-features"></span><h3>次要特性<a class="headerlink" href="#minor-features" title="永久链接至标题">¶</a></h3>
<div class="section" id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a><a class="headerlink" href="#django-contrib-admin" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>现在可以在用户界面中切换管理界面的明亮或暗色主题，并且还可以设置为跟随系统设置。</li>
<li>管理界面现在更倾向于使用系统 UI 字体，不再需要下载字体。此外，提供了 CSS 变量，以便更轻松地覆盖默认字体系列。</li>
<li><a class="reference external" href="https://github.com/django/django/blob/main/django/contrib/admin/templates/admin/delete_confirmation.html">admin/delete_confirmation.html</a> 模板现在具有一些额外的块和脚本钩子，以便于定制。</li>
<li><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.filter_horizontal" title="django.contrib.admin.ModelAdmin.filter_horizontal"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filter_horizontal</span></code></a> 和 <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.filter_vertical" title="django.contrib.admin.ModelAdmin.filter_vertical"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filter_vertical</span></code></a> 组件的选择选项现在是可过滤的。</li>
<li>模板 <code class="docutils literal notranslate"><span class="pre">admin/base.html</span></code> 现在具有一个新的块 <code class="docutils literal notranslate"><span class="pre">nav-breadcrumbs</span></code>，其中包含导航标志和 <code class="docutils literal notranslate"><span class="pre">breadcrumbs</span></code> 块。</li>
<li><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.list_editable" title="django.contrib.admin.ModelAdmin.list_editable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.list_editable</span></code></a> 现在在进行编辑时使用原子事务。</li>
<li>jQuery 的版本已从 3.6.0 升级到 3.6.4 。</li>
</ul>
</div>
<div class="section" id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a><a class="headerlink" href="#django-contrib-auth" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>PBKDF2 密码哈希器的默认迭代次数从 390 , 000 增加到 600 , 000 。</li>
<li><a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.UserCreationForm" title="django.contrib.auth.forms.UserCreationForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserCreationForm</span></code></a> 现在保存了自定义用户模型的多对多表单字段。</li>
<li>新的 <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.BaseUserCreationForm" title="django.contrib.auth.forms.BaseUserCreationForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseUserCreationForm</span></code></a> 现在是自定义用户创建表单的推荐基类。</li>
</ul>
</div>
<div class="section" id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#django-contrib-gis" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/contrib/gis/serializers.html"><span class="doc">GeoJSON 序列化程序</span></a> 现在输出序列化要素的 <code class="docutils literal notranslate"><span class="pre">id</span></code> 键，默认为对象的主键。</li>
<li><a class="reference internal" href="../ref/contrib/gis/gdal.html#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">GDALRaster</span></code></a> 类现在支持 <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(在 Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>。</li>
<li><a class="reference internal" href="../ref/contrib/gis/geoip2.html#django.contrib.gis.geoip2.GeoIP2" title="django.contrib.gis.geoip2.GeoIP2"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoIP2</span></code></a> 类现在支持从 DB-IP 下载的 <code class="docutils literal notranslate"><span class="pre">.mmdb</span></code> 文件。</li>
<li>OpenLayers 模板小部件不再包含内联 CSS（也删除了以前的 <code class="docutils literal notranslate"><span class="pre">map_css</span></code> 块），以更好地符合严格的内容安全策略。</li>
<li><a class="reference internal" href="../ref/contrib/gis/forms-api.html#django.contrib.gis.forms.widgets.OpenLayersWidget" title="django.contrib.gis.forms.widgets.OpenLayersWidget"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpenLayersWidget</span></code></a> 现在基于 OpenLayers 7.2.2（之前是 4.6.5）。</li>
<li>新的 <a class="reference internal" href="../ref/contrib/gis/geoquerysets.html#std-fieldlookup-isempty"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">isempty</span></code></a> 查找和 <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.IsEmpty" title="django.contrib.gis.db.models.functions.IsEmpty"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsEmpty()</span></code></a> 表达式允许在 PostGIS 上筛选空几何图形。</li>
<li>新的 <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.FromWKB" title="django.contrib.gis.db.models.functions.FromWKB"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromWKB()</span></code></a> 和 <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.FromWKT" title="django.contrib.gis.db.models.functions.FromWKT"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromWKT()</span></code></a> 函数允许从 Well-known binary (WKB) 和 Well-known text (WKT) 表示中创建几何图形。</li>
</ul>
</div>
<div class="section" id="s-django-contrib-postgres">
<span id="django-contrib-postgres"></span><h4><a class="reference internal" href="../ref/contrib/postgres/index.html#module-django.contrib.postgres" title="django.contrib.postgres: PostgreSQL-specific fields and features"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a><a class="headerlink" href="#django-contrib-postgres" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>新的 <a class="reference internal" href="../ref/contrib/postgres/lookups.html#std-fieldlookup-trigram_strict_word_similar"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">trigram_strict_word_similar</span></code></a> 查找以及 <a class="reference internal" href="../ref/contrib/postgres/search.html#django.contrib.postgres.search.TrigramStrictWordSimilarity" title="django.contrib.postgres.search.TrigramStrictWordSimilarity"><code class="xref py py-class docutils literal notranslate"><span class="pre">TrigramStrictWordSimilarity()</span></code></a> 和 <a class="reference internal" href="../ref/contrib/postgres/search.html#django.contrib.postgres.search.TrigramStrictWordDistance" title="django.contrib.postgres.search.TrigramStrictWordDistance"><code class="xref py py-class docutils literal notranslate"><span class="pre">TrigramStrictWordDistance()</span></code></a> 表达式允许使用 trigram 严格单词相似性。</li>
<li><a class="reference internal" href="../ref/contrib/postgres/fields.html#std-fieldlookup-arrayfield.overlap"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">arrayfield.overlap</span></code></a> 查找现在支持 <code class="docutils literal notranslate"><span class="pre">QuerySet.values()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">values_list()</span></code> 作为右侧。</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sitemaps">
<span id="django-contrib-sitemaps"></span><h4><a class="reference internal" href="../ref/contrib/sitemaps.html#module-django.contrib.sitemaps" title="django.contrib.sitemaps: A framework for generating Google sitemap XML files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sitemaps</span></code></a><a class="headerlink" href="#django-contrib-sitemaps" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>新的 <a class="reference internal" href="../ref/contrib/sitemaps.html#django.contrib.sitemaps.Sitemap.get_languages_for_item" title="django.contrib.sitemaps.Sitemap.get_languages_for_item"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sitemap.get_languages_for_item()</span></code></a> 方法允许自定义显示项目的语言列表。</li>
</ul>
</div>
<div class="section" id="s-django-contrib-staticfiles">
<span id="django-contrib-staticfiles"></span><h4><a class="reference internal" href="../ref/contrib/staticfiles.html#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a><a class="headerlink" href="#django-contrib-staticfiles" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage</span></code></a> 现在具有实验性支持，在 <code class="docutils literal notranslate"><span class="pre">import</span></code> 和 <code class="docutils literal notranslate"><span class="pre">export</span></code> 语句中用其哈希值替换 JavaScript 模块的路径。如果你想尝试它，可以子类化 <code class="docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage</span></code> 并将 <code class="docutils literal notranslate"><span class="pre">support_js_module_import_aggregation</span></code> 属性设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</li>
<li>新的 <a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.storage.ManifestStaticFilesStorage.manifest_hash" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage.manifest_hash"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage.manifest_hash</span></code></a> 属性提供了对清单中所有文件的哈希，并在其中任何文件更改时更改。</li>
</ul>
</div>
<div class="section" id="s-database-backends">
<span id="database-backends"></span><h4>数据库后端<a class="headerlink" href="#database-backends" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>在 PostgreSQL 的 <a class="reference internal" href="../ref/settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> 中现在支持新的 <code class="docutils literal notranslate"><span class="pre">&quot;assume_role&quot;</span></code> 选项，允许指定 <a class="reference internal" href="../ref/databases.html#database-role"><span class="std std-ref">会话角色</span></a>。</li>
<li>在 PostgreSQL 上，使用 <code class="docutils literal notranslate"><span class="pre">psycopg</span></code> 3.1.8+，现在支持 <a class="reference internal" href="../ref/settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> 中的新选项 <code class="docutils literal notranslate"><span class="pre">&quot;server_side_binding&quot;</span></code>，允许使用 <a class="reference internal" href="../ref/databases.html#database-server-side-parameters-binding"><span class="std std-ref">服务器端绑定游标</span></a>。</li>
</ul>
</div>
<div class="section" id="s-error-reporting">
<span id="error-reporting"></span><h4>错误报告<a class="headerlink" href="#error-reporting" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>在 Python 3.11+ 上，调试页面现在显示 <span class="target" id="index-6"></span><a class="pep reference external" href="https://peps.python.org/pep-0678/"><strong>异常说明</strong></a> 和 <span class="target" id="index-7"></span><a class="pep reference external" href="https://peps.python.org/pep-0657/"><strong>细粒度错误位置</strong></a>。</li>
<li>会话 cookie 现在被视为凭据，因此在错误报告中被隐藏并替换为星号（<code class="docutils literal notranslate"><span class="pre">**********</span></code>）。</li>
</ul>
</div>
<div class="section" id="s-forms">
<span id="forms"></span><h4>表单<a class="headerlink" href="#forms" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> 现在接受新的 <code class="docutils literal notranslate"><span class="pre">Meta</span></code> 选项 <code class="docutils literal notranslate"><span class="pre">formfield_callback</span></code>，以自定义表单字段。</li>
<li><a class="reference internal" href="../ref/forms/models.html#django.forms.models.modelform_factory" title="django.forms.models.modelform_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">modelform_factory()</span></code></a> 现在尊重表单的 <code class="docutils literal notranslate"><span class="pre">Meta</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">formfield_callback</span></code> 属性。</li>
</ul>
</div>
<div class="section" id="s-internationalization">
<span id="internationalization"></span><h4>国际化<a class="headerlink" href="#internationalization" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>增加了对中央库尔德语（索拉尼方言）的支持和翻译。</li>
</ul>
</div>
<div class="section" id="s-logging">
<span id="logging"></span><h4>日志<a class="headerlink" href="#logging" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/logging.html#django-db-logger"><span class="std std-ref">django.db.backends</span></a> 记录器现在以 <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> 级别记录事务管理查询（<code class="docutils literal notranslate"><span class="pre">BEGIN</span></code>、<code class="docutils literal notranslate"><span class="pre">COMMIT</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ROLLBACK</span></code>）。</li>
</ul>
</div>
<div class="section" id="s-management-commands">
<span id="management-commands"></span><h4>管理命令<a class="headerlink" href="#management-commands" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-makemessages"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">makemessages</span></code></a> 命令现在支持具有私有子标记的区域设置，例如 <code class="docutils literal notranslate"><span class="pre">nl_NL-x-informal</span></code>。</li>
<li>新的 <a class="reference internal" href="../ref/django-admin.html#cmdoption-makemigrations-update"><code class="xref std std-option docutils literal notranslate"><span class="pre">makemigrations</span> <span class="pre">--update</span></code></a> 选项将模型更改合并到最新的迁移中，并优化生成的操作。</li>
</ul>
</div>
<div class="section" id="s-migrations">
<span id="migrations"></span><h4>迁移<a class="headerlink" href="#migrations" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>迁移现在支持对 <code class="docutils literal notranslate"><span class="pre">enum.Flag</span></code> 对象的序列化。</li>
</ul>
</div>
<div class="section" id="s-models">
<span id="models"></span><h4>模型<a class="headerlink" href="#models" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> 现在在除执行聚合时的窗口函数的析取过滤查询外，广泛支持与 <a class="reference internal" href="../ref/models/database-functions.html#window-functions"><span class="std std-ref">窗口函数</span></a> 进行过滤。</li>
<li><a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.prefetch_related" title="django.db.models.query.QuerySet.prefetch_related"><code class="xref py py-meth docutils literal notranslate"><span class="pre">prefetch_related()</span></code></a> 现在支持带有切片查询集的 <a class="reference internal" href="../ref/models/querysets.html#django.db.models.Prefetch" title="django.db.models.Prefetch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prefetch</span></code></a> 对象。</li>
<li>现在支持在 <a class="reference internal" href="../ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> 实例上 <a class="reference internal" href="../ref/models/lookups.html#lookup-registration-api"><span class="std std-ref">注册查找</span></a>。</li>
<li>新的 <code class="docutils literal notranslate"><span class="pre">robust</span></code> 参数用于 <a class="reference internal" href="../topics/db/transactions.html#django.db.transaction.on_commit" title="django.db.transaction.on_commit"><code class="xref py py-func docutils literal notranslate"><span class="pre">on_commit()</span></code></a>，允许在数据库事务成功提交后执行可能失败的操作。</li>
<li>新的 <a class="reference internal" href="../topics/db/queries.html#django.db.models.fields.json.KT" title="django.db.models.fields.json.KT"><code class="xref py py-class docutils literal notranslate"><span class="pre">KT()</span></code></a> 表达式表示 <a class="reference internal" href="../ref/models/fields.html#django.db.models.JSONField" title="django.db.models.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONField</span></code></a> 的键、索引或路径转换的文本值。</li>
<li><a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Now" title="django.db.models.functions.Now"><code class="xref py py-class docutils literal notranslate"><span class="pre">Now</span></code></a> 现在在 MySQL 上支持微秒精度，在 SQLite 上支持毫秒精度。</li>
<li><a class="reference internal" href="../ref/models/expressions.html#django.db.models.F" title="django.db.models.F"><code class="xref py py-class docutils literal notranslate"><span class="pre">F()</span></code></a> 表达式输出的 <code class="docutils literal notranslate"><span class="pre">BooleanField</span></code> 现在可以使用 <code class="docutils literal notranslate"><span class="pre">~F()</span></code> （取反操作符）进行取反。</li>
<li><code class="docutils literal notranslate"><span class="pre">Model</span></code> 现在提供了一些使用数据库的方法的异步版本，使用 <code class="docutils literal notranslate"><span class="pre">a</span></code> 前缀：<a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.adelete" title="django.db.models.Model.adelete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">adelete()</span></code></a>、<a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.arefresh_from_db" title="django.db.models.Model.arefresh_from_db"><code class="xref py py-meth docutils literal notranslate"><span class="pre">arefresh_from_db()</span></code></a> 和 <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.asave" title="django.db.models.Model.asave"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asave()</span></code></a>。</li>
<li>Related 管理器现在提供了一些更改相关对象集合的异步方法，使用 <code class="docutils literal notranslate"><span class="pre">a</span></code> 前缀：<a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.aadd" title="django.db.models.fields.related.RelatedManager.aadd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aadd()</span></code></a>、<a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.aclear" title="django.db.models.fields.related.RelatedManager.aclear"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aclear()</span></code></a>、<a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.aremove" title="django.db.models.fields.related.RelatedManager.aremove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aremove()</span></code></a> 和 <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.aset" title="django.db.models.fields.related.RelatedManager.aset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aset()</span></code></a>。</li>
<li><a class="reference internal" href="../ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CharField.max_length</span></code></a> 不再需要在 PostgreSQL 上设置，因为它支持无限长度的 <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> 列。</li>
</ul>
</div>
<div class="section" id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>请求和响应<a class="headerlink" href="#requests-and-responses" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/request-response.html#django.http.StreamingHttpResponse" title="django.http.StreamingHttpResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamingHttpResponse</span></code></a> 现在在通过 ASGI 提供服务时支持异步迭代器。</li>
</ul>
</div>
<div class="section" id="s-tests">
<span id="tests"></span><h4>测试<a class="headerlink" href="#tests" title="永久链接至标题">¶</a></h4>
<ul>
<li><p class="first"><a class="reference internal" href="../ref/django-admin.html#cmdoption-test-debug-sql"><code class="xref std std-option docutils literal notranslate"><span class="pre">test</span> <span class="pre">--debug-sql</span></code></a> 选项现在使用 <code class="docutils literal notranslate"><span class="pre">sqlparse</span></code> 格式化 SQL 查询。</p>
</li>
<li><p class="first"><a class="reference internal" href="../topics/testing/advanced.html#django.test.RequestFactory" title="django.test.RequestFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">RequestFactory</span></code></a>、<a class="reference internal" href="../topics/testing/advanced.html#django.test.AsyncRequestFactory" title="django.test.AsyncRequestFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncRequestFactory</span></code></a>、<a class="reference internal" href="../topics/testing/tools.html#django.test.Client" title="django.test.Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Client</span></code></a> 和 <a class="reference internal" href="../topics/testing/tools.html#django.test.AsyncClient" title="django.test.AsyncClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncClient</span></code></a> 类现在支持 <code class="docutils literal notranslate"><span class="pre">headers</span></code> 参数，它接受一个包含头部名称和值的字典。这允许更自然的语法来声明头部。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Before:</span>
<span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/home/&quot;</span><span class="p">,</span> <span class="n">HTTP_ACCEPT_LANGUAGE</span><span class="o">=</span><span class="s2">&quot;fr&quot;</span><span class="p">)</span>
<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/home/&quot;</span><span class="p">,</span> <span class="n">ACCEPT_LANGUAGE</span><span class="o">=</span><span class="s2">&quot;fr&quot;</span><span class="p">)</span>

<span class="c1"># After:</span>
<span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/home/&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;accept-language&quot;</span><span class="p">:</span> <span class="s2">&quot;fr&quot;</span><span class="p">})</span>
<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/home/&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;accept-language&quot;</span><span class="p">:</span> <span class="s2">&quot;fr&quot;</span><span class="p">})</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="s-utilities">
<span id="utilities"></span><h4>实用程序<a class="headerlink" href="#utilities" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/utils.html#django.utils.html.json_script" title="django.utils.html.json_script"><code class="xref py py-meth docutils literal notranslate"><span class="pre">django.utils.html.json_script()</span></code></a> 函数的新参数 <code class="docutils literal notranslate"><span class="pre">encoder</span></code> 允许自定义 JSON 编码器类。</li>
<li>私有的内部 vendored 版本的 <code class="docutils literal notranslate"><span class="pre">urllib.parse.urlsplit()</span></code> 现在会删除 <code class="docutils literal notranslate"><span class="pre">'\r'</span></code>、<code class="docutils literal notranslate"><span class="pre">'\n'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">'\t'</span></code> （参见 <a class="reference external" href="https://nvd.nist.gov/vuln/detail/CVE-2022-0391">CVE-2022-0391</a> 和 <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43882">bpo-43882</a>）。这是为了保护可能错误使用内部 <code class="docutils literal notranslate"><span class="pre">url_has_allowed_host_and_scheme()</span></code> 函数而不是使用文档中记录的处理 URL 重定向的函数的项目。Django 的函数没有受到影响。</li>
<li>新的 <a class="reference internal" href="../ref/utils.html#django.utils.http.content_disposition_header" title="django.utils.http.content_disposition_header"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.utils.http.content_disposition_header()</span></code></a> 函数返回根据 <span class="target" id="index-8"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6266.html"><strong>RFC 6266</strong></a> 规定的 <code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> HTTP 标头值。</li>
</ul>
</div>
<div class="section" id="s-validators">
<span id="validators"></span><h4>验证器<a class="headerlink" href="#validators" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">CommonPasswordValidator</span></code> 使用的常见密码列表已更新为最新版本。</li>
</ul>
</div>
</div>
</div>
<div class="section" id="s-backwards-incompatible-changes-in-4-2">
<span id="s-backwards-incompatible-4-2"></span><span id="backwards-incompatible-changes-in-4-2"></span><span id="backwards-incompatible-4-2"></span><h2>Django 4.2 中的不向后兼容的变更<a class="headerlink" href="#backwards-incompatible-changes-in-4-2" title="永久链接至标题">¶</a></h2>
<div class="section" id="s-database-backend-api">
<span id="database-backend-api"></span><h3>数据库后端 API<a class="headerlink" href="#database-backend-api" title="永久链接至标题">¶</a></h3>
<p>本节介绍了第三方数据库后端可能需要的更改。</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.allows_group_by_pk</span></code> 已被移除，因为它仅保留以适应一个已被 MySQL 5.7.15 中正确的功能依赖检测所取代的 MySQL 扩展。请注意，仍然支持 <code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.allows_group_by_selected_pks</span></code>，如果您的后端支持 <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> 子句中的功能依赖检测，应该启用它，如 <code class="docutils literal notranslate"><span class="pre">SQL:1999</span></code> 标准所规定的。</li>
<li><a class="reference internal" href="../ref/django-admin.html#django-admin-inspectdb"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">inspectdb</span></code></a> 现在使用 <code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_table_description()</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">display_size</span></code>，而不是 <code class="docutils literal notranslate"><span class="pre">internal_size</span></code> 用于 <code class="docutils literal notranslate"><span class="pre">CharField</span></code>。</li>
</ul>
</div>
<div class="section" id="s-dropped-support-for-mariadb-10-3">
<span id="dropped-support-for-mariadb-10-3"></span><h3>不再支持 MariaDB 10.3<a class="headerlink" href="#dropped-support-for-mariadb-10-3" title="永久链接至标题">¶</a></h3>
<p>MariaDB 10.3 的上游支持将于 2023 年 5 月结束。 Django 4.2 支持 MariaDB 10.4 及更高版本。</p>
</div>
<div class="section" id="s-dropped-support-for-mysql-5-7">
<span id="dropped-support-for-mysql-5-7"></span><h3>不再支持 MySQL 5.7<a class="headerlink" href="#dropped-support-for-mysql-5-7" title="永久链接至标题">¶</a></h3>
<p>MySQL 5.7 的上游支持将于 2023 年 10 月结束。 Django 4.2 支持 MySQL 8 及更高版本。</p>
</div>
<div class="section" id="s-dropped-support-for-postgresql-11">
<span id="dropped-support-for-postgresql-11"></span><h3>不再支持 PostgreSQL 11<a class="headerlink" href="#dropped-support-for-postgresql-11" title="永久链接至标题">¶</a></h3>
<p>PostgreSQL 11 的上游支持将于 2023 年 11 月结束。 Django 4.2 支持 PostgreSQL 12 及更高版本。</p>
</div>
<div class="section" id="s-setting-update-fields-in-model-save-may-now-be-required">
<span id="setting-update-fields-in-model-save-may-now-be-required"></span><h3>在 <code class="docutils literal notranslate"><span class="pre">Model.save()</span></code> 中设置 <code class="docutils literal notranslate"><span class="pre">update_fields</span></code> 可能现在是必需的<a class="headerlink" href="#setting-update-fields-in-model-save-may-now-be-required" title="永久链接至标题">¶</a></h3>
<p>为了避免更新不必要的列，<a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.update_or_create" title="django.db.models.query.QuerySet.update_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.update_or_create()</span></code></a> 现在将 <code class="docutils literal notranslate"><span class="pre">update_fields</span></code> 传递给 <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.save()</span></code></a> 调用。因此，在调用 <code class="docutils literal notranslate"><span class="pre">super()</span></code> 之前，应该将在自定义的 <code class="docutils literal notranslate"><span class="pre">save()</span></code> 方法中修改的任何字段添加到 <code class="docutils literal notranslate"><span class="pre">update_fields</span></code> 关键字参数中。详细信息请参阅 <a class="reference internal" href="../topics/db/models.html#overriding-model-methods"><span class="std std-ref">重写之前定义的模型方法</span></a>。</p>
</div>
<div class="section" id="s-dropped-support-for-raw-aggregations-on-mysql">
<span id="dropped-support-for-raw-aggregations-on-mysql"></span><h3>在 MySQL 上取消了对原始聚合的支持<a class="headerlink" href="#dropped-support-for-raw-aggregations-on-mysql" title="永久链接至标题">¶</a></h3>
<p>MySQL 8+ 允许在 <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> 列上使用函数依赖，因此在 Django 4.2 之前的版本中通过对主表的主键进行分组的解决方法已被移除。因此，在 MySQL 上不再支持使用 <code class="docutils literal notranslate"><span class="pre">RawSQL()</span></code> 进行聚合，因为无法确定这些聚合是否在 <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> 子句中需要或有效。请改用 <span class="xref std std-ref">聚合函数</span>。</p>
</div>
<div class="section" id="s-miscellaneous">
<span id="miscellaneous"></span><h3>杂项<a class="headerlink" href="#miscellaneous" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>未记录的 <code class="docutils literal notranslate"><span class="pre">django.http.multipartparser.parse_header()</span></code> 函数已被移除。请改用 <code class="docutils literal notranslate"><span class="pre">django.utils.http.parse_header_parameters()</span></code>。</li>
<li><a class="reference internal" href="../topics/i18n/translation.html#std-templatetag-blocktranslate"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">{%</span> <span class="pre">blocktranslate</span> <span class="pre">asvar</span> <span class="pre">…</span> <span class="pre">%}</span></code></a> 的结果现在被标记为适用于（HTML）输出目的的安全内容。</li>
<li>在管理界面的搜索框中移除了 <code class="docutils literal notranslate"><span class="pre">autofocus</span></code> HTML 属性，因为它对屏幕阅读器可能会造成困惑。</li>
<li><a class="reference internal" href="../ref/django-admin.html#cmdoption-makemigrations-check"><code class="xref std std-option docutils literal notranslate"><span class="pre">makemigrations</span> <span class="pre">--check</span></code></a> 选项不再创建缺失的迁移文件。</li>
<li><a class="reference internal" href="../ref/models/expressions.html#django.db.models.Expression.get_group_by_cols" title="django.db.models.Expression.get_group_by_cols"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Expression.get_group_by_cols()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">alias</span></code> 参数已被移除。</li>
<li><code class="docutils literal notranslate"><span class="pre">sqlparse</span></code> 的最低支持版本已从 0.2.2 增加到 0.3.1。</li>
<li><a class="reference internal" href="../ref/models/expressions.html#django.db.models.Exists" title="django.db.models.Exists"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exists</span></code></a> 表达式的未记录的 <code class="docutils literal notranslate"><span class="pre">negated</span></code> 参数已被移除。</li>
<li>未记录的 <code class="docutils literal notranslate"><span class="pre">Query.add_annotation()</span></code> 方法的 <code class="docutils literal notranslate"><span class="pre">is_summary</span></code> 参数已被移除。</li>
<li>最低支持的 SQLite 版本从 3.9.0 提高到 3.21.0 。</li>
<li><code class="docutils literal notranslate"><span class="pre">asgiref</span></code> 的最低支持版本已从 3.5.2 增加到 3.6.0。</li>
<li><a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.UserCreationForm" title="django.contrib.auth.forms.UserCreationForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserCreationForm</span></code></a> 现在拒绝仅在大小写上不同的用户名。如果需要之前的行为，请改用 <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.BaseUserCreationForm" title="django.contrib.auth.forms.BaseUserCreationForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseUserCreationForm</span></code></a>。</li>
<li><code class="docutils literal notranslate"><span class="pre">mysqlclient</span></code> 的最低支持版本从 1.4.0 增加到 1.4.3。</li>
<li><code class="docutils literal notranslate"><span class="pre">argon2-cffi</span></code> 的最低支持版本已从 19.1.0 增加到 19.2.0。</li>
<li><code class="docutils literal notranslate"><span class="pre">Pillow</span></code> 的最低支持版本已从 6.2.0 增加到 6.2.1。</li>
<li><code class="docutils literal notranslate"><span class="pre">jinja2</span></code> 的最低支持版本已从 2.9.2 增加到 2.11.0。</li>
<li><a class="reference external" href="https://pypi.org/project/redis/">redis-py</a> 的最低支持版本已从 3.0.0 增加到 3.4.0。</li>
<li>手动实例化的 <code class="docutils literal notranslate"><span class="pre">WSGIRequest</span></code> 对象必须为 <code class="docutils literal notranslate"><span class="pre">wsgi.input</span></code> 提供一个类似文件的对象。之前，Django 对于 WSGI 规范中指定的预期行为更加宽松。</li>
<li>已移除对 <code class="docutils literal notranslate"><span class="pre">PROJ</span></code> 版本低于 5 的支持。</li>
<li><a class="reference internal" href="../topics/email.html#django.core.mail.backends.smtp.EmailBackend" title="django.core.mail.backends.smtp.EmailBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmailBackend</span></code></a> 现在验证 <a class="reference external" href="https://docs.python.org/3/library/ssl.html#ssl.SSLContext.check_hostname" title="(在 Python v3.12)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">hostname</span></code></a> 和 <a class="reference external" href="https://docs.python.org/3/library/ssl.html#ssl.SSLContext.verify_mode" title="(在 Python v3.12)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">certificates</span></code></a>。如果你需要以前不那么严格且不推荐的行为，可以子类化 <code class="docutils literal notranslate"><span class="pre">EmailBackend</span></code> 并重写 <code class="docutils literal notranslate"><span class="pre">ssl_context</span></code> 属性。</li>
</ul>
</div>
</div>
<div class="section" id="s-features-deprecated-in-4-2">
<span id="s-deprecated-features-4-2"></span><span id="features-deprecated-in-4-2"></span><span id="deprecated-features-4-2"></span><h2>在 4.2 版本中弃用的功能<a class="headerlink" href="#features-deprecated-in-4-2" title="永久链接至标题">¶</a></h2>
<div class="section" id="s-index-together-option-is-deprecated-in-favor-of-indexes">
<span id="index-together-option-is-deprecated-in-favor-of-indexes"></span><h3><code class="docutils literal notranslate"><span class="pre">index_together</span></code> 选项已被弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">indexes</span></code><a class="headerlink" href="#index-together-option-is-deprecated-in-favor-of-indexes" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="../ref/models/options.html#django.db.models.Options.index_together" title="django.db.models.Options.index_together"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.index_together</span></code></a> 选项已被弃用，推荐使用 <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">indexes</span></code></a> 选项。</p>
<p>迁移现有的 <code class="docutils literal notranslate"><span class="pre">index_together</span></code> 应该作为一个迁移来处理。例如：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">rank</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">index_together</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;rank&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">]]</span>
</pre></div>
</div>
<p>应该变成：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">rank</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span><span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rank&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">])]</span>
</pre></div>
</div>
<p>运行 <a class="reference internal" href="../ref/django-admin.html#django-admin-makemigrations"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">makemigrations</span></code></a> 命令将生成一个迁移，其中包含一个 <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RenameIndex" title="django.db.migrations.operations.RenameIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RenameIndex</span></code></a> 操作，用于重命名现有的索引。接下来，考虑合并迁移以从历史迁移中移除 <code class="docutils literal notranslate"><span class="pre">index_together</span></code>。</p>
<p><code class="docutils literal notranslate"><span class="pre">AlterIndexTogether</span></code> 迁移操作现在官方上仅支持用于 Django 4.2 之前的迁移文件。出于向后兼容性的原因，它仍然是公共 API 的一部分，没有计划弃用或移除它，但不应该在新的迁移中使用。应该使用 <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.AddIndex" title="django.db.migrations.operations.AddIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddIndex</span></code></a> 和 <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RemoveIndex" title="django.db.migrations.operations.RemoveIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoveIndex</span></code></a> 操作代替。</p>
</div>
<div class="section" id="s-passing-encoded-json-string-literals-to-jsonfield-is-deprecated">
<span id="passing-encoded-json-string-literals-to-jsonfield-is-deprecated"></span><h3>传递编码的 JSON 字符串文字给 <code class="docutils literal notranslate"><span class="pre">JSONField</span></code> 已被弃用<a class="headerlink" href="#passing-encoded-json-string-literals-to-jsonfield-is-deprecated" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">JSONField</span></code> 及其相关的查找和聚合操作曾允许传递 JSON 编码的字符串文字，这导致了在数据库后端的角度上对字符串文字是否已经编码的歧义。</p>
<p>在弃用期间，将尝试对字符串字面值进行 JSON 解码，并在成功时发出警告，指出应传递非编码形式的内容。</p>
<p>曾经用于传递 JSON 编码的字符串文字的代码：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Document</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="s2">&quot;null&quot;</span><span class="p">)),</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)),</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="s1">&#39;&quot;foo-bar&quot;&#39;</span><span class="p">)),</span>
<span class="p">)</span>
<span class="n">Document</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">JSONBAgg</span><span class="p">(</span><span class="s2">&quot;field&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>应该变成：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Document</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">JSONField</span><span class="p">())),</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[]),</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s2">&quot;foo-bar&quot;</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">Document</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">JSONBAgg</span><span class="p">(</span><span class="s2">&quot;field&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[]),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>从 Django 5.1+ 开始，字符串字面值将被隐式解释为 JSON 字符串字面值。</p>
</div>
<div class="section" id="s-id1">
<span id="id1"></span><h3>杂项<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h3>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">BaseUserManager.make_random_password()</span></code> 方法已被弃用。请参阅 <a class="reference external" href="https://docs.python.org/3/library/secrets.html#recipes-and-best-practices">Python 的 secrets 模块的文档</a> 了解如何使用 Python 的 <a class="reference external" href="https://docs.python.org/3/library/secrets.html#module-secrets" title="(在 Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">secrets</span></code></a> 模块生成密码的示例和最佳实践。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">length_is</span></code> 模板过滤器已被弃用，推荐使用 <a class="reference internal" href="../ref/templates/builtins.html#std-templatefilter-length"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">length</span></code></a> 和在 <a class="reference internal" href="../ref/templates/builtins.html#std-templatetag-if"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">%}</span></code></a> 标签内使用 <code class="docutils literal notranslate"><span class="pre">==</span></code> 运算符。例如：</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">value</span><span class="o">|</span><span class="nf">length</span> <span class="o">==</span> <span class="m">4</span> <span class="cp">%}</span>…<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">value</span><span class="o">|</span><span class="nf">length</span> <span class="o">==</span> <span class="m">4</span> <span class="cp">%}</span>True<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>False<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>而不是：</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">value</span><span class="o">|</span><span class="nf">length_is</span><span class="o">:</span><span class="m">4</span> <span class="cp">%}</span>…<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">length_is</span><span class="o">:</span><span class="m">4</span> <span class="cp">}}</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">django.contrib.auth.hashers.SHA1PasswordHasher</span></code>、<code class="docutils literal notranslate"><span class="pre">django.contrib.auth.hashers.UnsaltedSHA1PasswordHasher</span></code> 和 <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.hashers.UnsaltedMD5PasswordHasher</span></code> 已被弃用。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.CICharField</span></code> 已被弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">CharField(db_collation=&quot;…&quot;)</span></code>，并指定一个不区分大小写的非确定性排序规则(collation)。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.CIEmailField</span></code> 已被弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">EmailField(db_collation=&quot;…&quot;)</span></code>，并指定一个不区分大小写的非确定性排序规则(collation)。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.CITextField</span></code> 已被弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">TextField(db_collation=&quot;…&quot;)</span></code>，并指定一个不区分大小写的非确定性排序规则(collation)。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.CIText</span></code> mixin 已被弃用。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">BaseGeometryWidget</span></code> 的 <code class="docutils literal notranslate"><span class="pre">map_height</span></code> 和 <code class="docutils literal notranslate"><span class="pre">map_width</span></code> 属性已被弃用，请改用 CSS 来设置地图小部件的大小。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">SimpleTestCase.assertFormsetError()</span></code> 已被弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">assertFormSetError()</span></code>。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">TransactionTestCase.assertQuerysetEqual()</span></code> 已被弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">assertQuerySetEqual()</span></code>。</p>
</li>
<li><p class="first">将位置参数传递给 <code class="docutils literal notranslate"><span class="pre">Signer</span></code> 和 <code class="docutils literal notranslate"><span class="pre">TimestampSigner</span></code> 已被弃用，推荐使用仅限关键字的参数。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">DEFAULT_FILE_STORAGE</span></code> 设置已被弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">STORAGES[&quot;default&quot;]</span></code>。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">STATICFILES_STORAGE</span></code> 设置已被弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">STORAGES[&quot;staticfiles&quot;]</span></code>。</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">django.core.files.storage.get_storage_class()</span></code> 函数已被弃用。</p>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">Django 4.2 版本发行说明</a><ul>
<li><a class="reference internal" href="#python-compatibility">Python 兼容性</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-4-2">Django 4.2 新特性</a><ul>
<li><a class="reference internal" href="#psycopg-3-support">Psycopg 3 支持</a></li>
<li><a class="reference internal" href="#comments-on-columns-and-tables">对列和表的注释</a></li>
<li><a class="reference internal" href="#mitigation-for-the-breach-attack">对 BREACH 攻击的缓解措施</a></li>
<li><a class="reference internal" href="#in-memory-file-storage">内存中的文件存储</a></li>
<li><a class="reference internal" href="#custom-file-storages">自定义文件存储</a></li>
<li><a class="reference internal" href="#minor-features">次要特性</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-postgres"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-sitemaps"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sitemaps</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-staticfiles"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a></li>
<li><a class="reference internal" href="#database-backends">数据库后端</a></li>
<li><a class="reference internal" href="#error-reporting">错误报告</a></li>
<li><a class="reference internal" href="#forms">表单</a></li>
<li><a class="reference internal" href="#internationalization">国际化</a></li>
<li><a class="reference internal" href="#logging">日志</a></li>
<li><a class="reference internal" href="#management-commands">管理命令</a></li>
<li><a class="reference internal" href="#migrations">迁移</a></li>
<li><a class="reference internal" href="#models">模型</a></li>
<li><a class="reference internal" href="#requests-and-responses">请求和响应</a></li>
<li><a class="reference internal" href="#tests">测试</a></li>
<li><a class="reference internal" href="#utilities">实用程序</a></li>
<li><a class="reference internal" href="#validators">验证器</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-4-2">Django 4.2 中的不向后兼容的变更</a><ul>
<li><a class="reference internal" href="#database-backend-api">数据库后端 API</a></li>
<li><a class="reference internal" href="#dropped-support-for-mariadb-10-3">不再支持 MariaDB 10.3</a></li>
<li><a class="reference internal" href="#dropped-support-for-mysql-5-7">不再支持 MySQL 5.7</a></li>
<li><a class="reference internal" href="#dropped-support-for-postgresql-11">不再支持 PostgreSQL 11</a></li>
<li><a class="reference internal" href="#setting-update-fields-in-model-save-may-now-be-required">在 <code class="docutils literal notranslate"><span class="pre">Model.save()</span></code> 中设置 <code class="docutils literal notranslate"><span class="pre">update_fields</span></code> 可能现在是必需的</a></li>
<li><a class="reference internal" href="#dropped-support-for-raw-aggregations-on-mysql">在 MySQL 上取消了对原始聚合的支持</a></li>
<li><a class="reference internal" href="#miscellaneous">杂项</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-4-2">在 4.2 版本中弃用的功能</a><ul>
<li><a class="reference internal" href="#index-together-option-is-deprecated-in-favor-of-indexes"><code class="docutils literal notranslate"><span class="pre">index_together</span></code> 选项已被弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">indexes</span></code></a></li>
<li><a class="reference internal" href="#passing-encoded-json-string-literals-to-jsonfield-is-deprecated">传递编码的 JSON 字符串文字给 <code class="docutils literal notranslate"><span class="pre">JSONField</span></code> 已被弃用</a></li>
<li><a class="reference internal" href="#id1">杂项</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一个主题</h4>
    <p class="topless"><a href="4.2.1.html"
                          title="上一章">Django 4.2.1 版本发行说明</a></p>
  </div>
  <div>
    <h4>下一个主题</h4>
    <p class="topless"><a href="4.1.13.html"
                          title="下一章">Django 4.1.13 版本发行说明</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/releases/4.2.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">2月 21, 2024</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="4.2.1.html" title="Django 4.2.1 版本发行说明">previous</a>
     |
    <a href="index.html" title="发行说明" accesskey="U">up</a>
   |
    <a href="4.1.13.html" title="Django 4.1.13 版本发行说明">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>